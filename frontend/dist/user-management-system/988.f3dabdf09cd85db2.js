"use strict";(self.webpackChunkuser_management_system=self.webpackChunkuser_management_system||[]).push([[988],{2988:(I,u,o)=>{o.r(u),o.d(u,{DepartmentsModule:()=>S});var c=o(177),s=o(8326),a=o(9979),m=o(4046),t=o(4438),p=o(3856);function h(e,d){1&e&&t.nrm(0,"span",13)}function b(e,d){if(1&e){const r=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"button",10),t.EFF(7,"Edit"),t.k0s(),t.j41(8,"button",11),t.bIt("click",function(){const i=t.eBV(r).$implicit,l=t.XpG();return t.Njj(l.deleteDepartment(i.id))}),t.DNE(9,h,1,0,"span",12),t.EFF(10," Delete "),t.k0s()()()}if(2&e){const r=d.$implicit;t.R7$(2),t.JRh(r.name),t.R7$(2),t.JRh(r.description),t.R7$(2),t.Mz_("routerLink","edit/",r.id,""),t.R7$(2),t.Y8G("disabled",r.isDeleting),t.R7$(),t.Y8G("ngIf",r.isDeleting)}}function v(e,d){1&e&&(t.j41(0,"tr")(1,"td",14),t.nrm(2,"span",15),t.k0s()())}let g=(()=>{class e{constructor(r,n,i){this.router=r,this.departmentService=n,this.alertService=i}ngOnInit(){this.departmentService.getAll().pipe((0,m.$)()).subscribe(r=>this.departments=r)}deleteDepartment(r){this.departments.find(i=>i.id===r),this.departmentService.delete(r).pipe((0,m.$)()).subscribe(()=>{this.departments=this.departments.filter(i=>i.id!==r),this.alertService.success("Department deleted successfully",{keepAfterRouteChange:!0})})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(a.Ix),t.rXU(p.av),t.rXU(p.uE))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:18,vars:2,consts:[[1,"card"],[1,"card-header"],["routerLink","add",1,"btn","btn-primary","btn-sm","float-right"],[1,"card-body"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","50%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","3",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2," Departments "),t.j41(3,"button",2),t.EFF(4,"Add Department"),t.k0s()(),t.j41(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),t.EFF(10,"Name"),t.k0s(),t.j41(11,"th",6),t.EFF(12,"Description"),t.k0s(),t.j41(13,"th",7),t.EFF(14,"Actions"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,b,11,6,"tr",8)(17,v,3,0,"tr",9),t.k0s()()()()),2&n&&(t.R7$(16),t.Y8G("ngForOf",i.departments),t.R7$(),t.Y8G("ngIf",!i.departments))},dependencies:[c.Sq,c.bT,a.Wk],encapsulation:2})}}return e})();const F=e=>({"is-invalid":e});function k(e,d){1&e&&(t.j41(0,"div"),t.EFF(1,"Name is required"),t.k0s())}function E(e,d){if(1&e&&(t.j41(0,"div",13),t.DNE(1,k,2,0,"div",14),t.k0s()),2&e){const r=t.XpG();t.R7$(),t.Y8G("ngIf",r.f.name.errors.required)}}function C(e,d){1&e&&t.nrm(0,"span",15)}let f=(()=>{class e{constructor(r,n,i,l,$){this.formBuilder=r,this.route=n,this.router=i,this.departmentService=l,this.alertService=$,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({name:["",s.k0.required],description:[""]}),this.isAddMode||this.departmentService.getById(this.id).pipe((0,m.$)()).subscribe(r=>{this.form.patchValue(r)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createDepartment():this.updateDepartment())}createDepartment(){this.departmentService.create(this.form.value).pipe((0,m.$)()).subscribe({next:()=>{this.alertService.success("Department created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}updateDepartment(){this.departmentService.update(this.id,this.form.value).pipe((0,m.$)()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(s.ok),t.rXU(a.nX),t.rXU(a.Ix),t.rXU(p.av),t.rXU(p.uE))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:20,vars:8,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description"],["formControlName","description",1,"form-control"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],["routerLink","../",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2),t.k0s(),t.j41(3,"div",2)(4,"form",3),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(5,"div",4)(6,"label",5),t.EFF(7,"Name"),t.k0s(),t.nrm(8,"input",6),t.DNE(9,E,2,1,"div",7),t.k0s(),t.j41(10,"div",4)(11,"label",8),t.EFF(12,"Description"),t.k0s(),t.nrm(13,"textarea",9),t.k0s(),t.j41(14,"div",4)(15,"button",10),t.DNE(16,C,1,0,"span",11),t.EFF(17," Save "),t.k0s(),t.j41(18,"a",12),t.EFF(19,"Cancel"),t.k0s()()()()()),2&n&&(t.R7$(2),t.SpI(" ",i.isAddMode?"Add":"Edit"," Department "),t.R7$(2),t.Y8G("formGroup",i.form),t.R7$(4),t.Y8G("ngClass",t.eq3(6,F,i.submitted&&i.f.name.errors)),t.R7$(),t.Y8G("ngIf",i.submitted&&i.f.name.errors),t.R7$(6),t.Y8G("disabled",i.loading),t.R7$(),t.Y8G("ngIf",i.loading))},dependencies:[c.YU,c.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,a.Wk],encapsulation:2})}}return e})();const D=[{path:"",component:g},{path:"add",component:f},{path:"edit/:id",component:f}];let j=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[a.iI.forChild(D),a.iI]})}}return e})(),S=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,s.X1,a.iI,j]})}}return e})()}}]);
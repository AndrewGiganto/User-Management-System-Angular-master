"use strict";(self.webpackChunkuser_management_system=self.webpackChunkuser_management_system||[]).push([[717],{7717:(V,b,u)=>{u.r(b),u.d(b,{EmployeesModule:()=>J});var p=u(177),s=u(8326),d=u(9979),a=u(4046),e=u(4438),l=u(3856);function F(r,o){1&r&&e.nrm(0,"span",14)}function g(r,o){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"button",10),e.EFF(13,"Edit"),e.k0s(),e.j41(14,"button",11),e.EFF(15,"Transfer"),e.k0s(),e.j41(16,"button",12),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.deleteEmployee(i.id))}),e.DNE(17,F,1,0,"span",13),e.EFF(18," Delete "),e.k0s()()()}if(2&r){const t=o.$implicit;e.R7$(2),e.JRh(t.employeeId),e.R7$(2),e.Lme("",null==t.account?null:t.account.firstName," ",null==t.account?null:t.account.lastName,""),e.R7$(2),e.JRh(t.position),e.R7$(2),e.JRh(null==t.department?null:t.department.name),e.R7$(2),e.JRh(t.status),e.R7$(2),e.Mz_("routerLink","edit/",t.id,""),e.R7$(2),e.Mz_("routerLink","transfer/",t.id,""),e.R7$(2),e.Y8G("disabled",t.isDeleting),e.R7$(),e.Y8G("ngIf",t.isDeleting)}}function k(r,o){1&r&&(e.j41(0,"tr")(1,"td",15),e.nrm(2,"span",16),e.k0s()())}let y=(()=>{class r{constructor(t,n,i){this.router=t,this.employeeService=n,this.alertService=i}ngOnInit(){this.employeeService.getAll().pipe((0,a.$)()).subscribe(t=>this.employees=t)}deleteEmployee(t){this.employees.find(i=>i.id===t),this.employeeService.delete(t).pipe((0,a.$)()).subscribe(()=>{this.employees=this.employees.filter(i=>i.id!==t),this.alertService.success("Employee deleted successfully",{keepAfterRouteChange:!0})})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(d.Ix),e.rXU(l.O0),e.rXU(l.uE))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:24,vars:2,consts:[[1,"card"],[1,"card-header"],["routerLink","add",1,"btn","btn-primary","btn-sm","float-right"],[1,"card-body"],[1,"table","table-striped"],[2,"width","15%"],[2,"width","20%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-info","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","6",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Employees "),e.j41(3,"button",2),e.EFF(4,"Add Employee"),e.k0s()(),e.j41(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),e.EFF(10,"Employee ID"),e.k0s(),e.j41(11,"th",6),e.EFF(12,"Name"),e.k0s(),e.j41(13,"th",6),e.EFF(14,"Position"),e.k0s(),e.j41(15,"th",6),e.EFF(16,"Department"),e.k0s(),e.j41(17,"th",5),e.EFF(18,"Status"),e.k0s(),e.j41(19,"th",7),e.EFF(20,"Actions"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,g,19,12,"tr",8)(23,k,3,0,"tr",9),e.k0s()()()()),2&n&&(e.R7$(22),e.Y8G("ngForOf",i.employees),e.R7$(),e.Y8G("ngIf",!i.employees))},dependencies:[p.Sq,p.bT,d.Wk],encapsulation:2})}}return r})();const f=r=>({"is-invalid":r});function _(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"Employee ID is required"),e.k0s())}function I(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,_,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.employeeId.errors.required)}}function C(r,o){if(1&r&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&r){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.E5c("",t.firstName," ",t.lastName," (",t.email,")")}}function j(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"User account is required"),e.k0s())}function $(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,j,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.userId.errors.required)}}function R(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"Position is required"),e.k0s())}function D(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,R,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.position.errors.required)}}function S(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"Hire date is required"),e.k0s())}function T(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,S,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.hireDate.errors.required)}}function G(r,o){if(1&r&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&r){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function N(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"Department is required"),e.k0s())}function Y(r,o){if(1&r&&(e.j41(0,"div",25),e.DNE(1,N,2,0,"div",26),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.departmentId.errors.required)}}function A(r,o){1&r&&e.nrm(0,"span",28)}let E=(()=>{class r{constructor(t,n,i,m,c,h,v){this.formBuilder=t,this.route=n,this.router=i,this.accountService=m,this.departmentService=c,this.employeeService=h,this.alertService=v,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({employeeId:["",s.k0.required],userId:["",s.k0.required],position:["",s.k0.required],hireDate:["",s.k0.required],departmentId:["",s.k0.required],status:["active"]}),this.accountService.getAll().pipe((0,a.$)()).subscribe(t=>this.accounts=t),this.departmentService.getAll().pipe((0,a.$)()).subscribe(t=>this.departments=t),this.isAddMode||this.employeeService.getById(this.id).pipe((0,a.$)()).subscribe(t=>{this.form.patchValue(t)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createEmployee():this.updateEmployee())}createEmployee(){this.employeeService.create(this.form.value).pipe((0,a.$)()).subscribe({next:()=>{this.alertService.success("Employee created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}})}updateEmployee(){this.employeeService.update(this.id,this.form.value).pipe((0,a.$)()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(s.ok),e.rXU(d.nX),e.rXU(d.Ix),e.rXU(l.Di),e.rXU(l.av),e.rXU(l.O0),e.rXU(l.uE))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:50,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","employeeId"],["type","text","formControlName","employeeId",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","userId"],["formControlName","userId",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","position"],["type","text","formControlName","position",1,"form-control",3,"ngClass"],["for","hireDate"],["type","date","formControlName","hireDate",1,"form-control",3,"ngClass"],["for","departmentId"],["formControlName","departmentId",1,"form-control",3,"ngClass"],["for","status"],["formControlName","status",1,"form-control"],["value","active"],["value","inactive"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],["routerLink","../",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.k0s(),e.j41(3,"div",2)(4,"form",3),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(5,"div",4)(6,"label",5),e.EFF(7,"Employee ID"),e.k0s(),e.nrm(8,"input",6),e.DNE(9,I,2,1,"div",7),e.k0s(),e.j41(10,"div",4)(11,"label",8),e.EFF(12,"User Account"),e.k0s(),e.j41(13,"select",9)(14,"option",10),e.EFF(15,"-- Select Account --"),e.k0s(),e.DNE(16,C,2,4,"option",11),e.k0s(),e.DNE(17,$,2,1,"div",7),e.k0s(),e.j41(18,"div",4)(19,"label",12),e.EFF(20,"Position"),e.k0s(),e.nrm(21,"input",13),e.DNE(22,D,2,1,"div",7),e.k0s(),e.j41(23,"div",4)(24,"label",14),e.EFF(25,"Hire Date"),e.k0s(),e.nrm(26,"input",15),e.DNE(27,T,2,1,"div",7),e.k0s(),e.j41(28,"div",4)(29,"label",16),e.EFF(30,"Department"),e.k0s(),e.j41(31,"select",17)(32,"option",10),e.EFF(33,"-- Select Department --"),e.k0s(),e.DNE(34,G,2,2,"option",11),e.k0s(),e.DNE(35,Y,2,1,"div",7),e.k0s(),e.j41(36,"div",4)(37,"label",18),e.EFF(38,"Status"),e.k0s(),e.j41(39,"select",19)(40,"option",20),e.EFF(41,"Active"),e.k0s(),e.j41(42,"option",21),e.EFF(43,"Inactive"),e.k0s()()(),e.j41(44,"div",4)(45,"button",22),e.DNE(46,A,1,0,"span",23),e.EFF(47," Save "),e.k0s(),e.j41(48,"a",24),e.EFF(49,"Cancel"),e.k0s()()()()()),2&n&&(e.R7$(2),e.SpI(" ",i.isAddMode?"Add":"Edit"," Employee "),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("ngClass",e.eq3(16,f,i.submitted&&i.f.employeeId.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.employeeId.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(18,f,i.submitted&&i.f.userId.errors)),e.R7$(3),e.Y8G("ngForOf",i.accounts),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.userId.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(20,f,i.submitted&&i.f.position.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.position.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(22,f,i.submitted&&i.f.hireDate.errors)),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.hireDate.errors),e.R7$(4),e.Y8G("ngClass",e.eq3(24,f,i.submitted&&i.f.departmentId.errors)),e.R7$(3),e.Y8G("ngForOf",i.departments),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.departmentId.errors),e.R7$(10),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[p.YU,p.Sq,p.bT,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.j4,s.JD,d.Wk],encapsulation:2})}}return r})();const X=r=>({"is-invalid":r});function U(r,o){if(1&r&&(e.j41(0,"div",14)(1,"h5"),e.EFF(2,"Employee Details"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Name:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Current Department:"),e.k0s(),e.EFF(10),e.k0s()()),2&r){const t=e.XpG();e.R7$(6),e.Lme(" ",null==t.employee.account?null:t.employee.account.firstName," ",null==t.employee.account?null:t.employee.account.lastName,""),e.R7$(4),e.SpI(" ",(null==t.employee.department?null:t.employee.department.name)||"None","")}}function w(r,o){if(1&r&&(e.j41(0,"option",15),e.EFF(1),e.k0s()),2&r){const t=o.$implicit;e.Y8G("value",t.id),e.R7$(),e.JRh(t.name)}}function q(r,o){1&r&&(e.j41(0,"div"),e.EFF(1,"Department is required"),e.k0s())}function L(r,o){if(1&r&&(e.j41(0,"div",16),e.DNE(1,q,2,0,"div",17),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.f.departmentId.errors.required)}}function O(r,o){1&r&&e.nrm(0,"span",18)}const B=[{path:"",component:y},{path:"add",component:E},{path:"edit/:id",component:E},{path:"transfer/:id",component:(()=>{class r{constructor(t,n,i,m,c,h,v){this.formBuilder=t,this.route=n,this.router=i,this.departmentService=m,this.employeeService=c,this.alertService=h,this.workflowService=v,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({departmentId:["",s.k0.required]}),this.departmentService.getAll().pipe((0,a.$)()).subscribe(t=>this.departments=t),this.employeeService.getById(this.id).pipe((0,a.$)()).subscribe(t=>{this.employee=t,this.oldDepartmentId=t.department?.id,this.form.patchValue({departmentId:this.oldDepartmentId})})}get f(){return this.form.controls}onSubmit(){if(this.submitted=!0,this.alertService.clear(),this.form.invalid)return;this.loading=!0;const t=this.form.value.departmentId;this.employeeService.transfer(this.id,t).pipe((0,a.$)()).subscribe({next:()=>{this.createTransferWorkflow(t),this.alertService.success("Transfer successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:n=>{this.alertService.error(n),this.loading=!1}})}createTransferWorkflow(t){const n=this.departments.find(c=>c.id===this.oldDepartmentId)?.name||"Unknown",i=this.departments.find(c=>c.id===t)?.name||"Unknown",m={type:"Transfer",status:"completed",details:{message:"Employee transfer completed",employeeId:this.id,fromDepartment:{id:this.oldDepartmentId,name:n},toDepartment:{id:t,name:i},timestamp:(new Date).toISOString()},employeeId:this.id};console.log("Creating workflow with params:",m),this.workflowService.create(m).pipe((0,a.$)()).subscribe({next:()=>console.log("Workflow record created for transfer"),error:c=>console.error("Error creating workflow record",c)})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(s.ok),e.rXU(d.nX),e.rXU(d.Ix),e.rXU(l.av),e.rXU(l.O0),e.rXU(l.uE),e.rXU(l.D_))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ng-component"]],decls:20,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","mb-4",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","departmentId"],["formControlName","departmentId",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],["routerLink","../../",1,"btn","btn-link"],[1,"mb-4"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," Transfer Employee "),e.k0s(),e.j41(3,"div",2),e.DNE(4,U,11,3,"div",3),e.j41(5,"form",4),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(6,"div",5)(7,"label",6),e.EFF(8,"New Department"),e.k0s(),e.j41(9,"select",7)(10,"option",8),e.EFF(11,"-- Select Department --"),e.k0s(),e.DNE(12,w,2,2,"option",9),e.k0s(),e.DNE(13,L,2,1,"div",10),e.k0s(),e.j41(14,"div",5)(15,"button",11),e.DNE(16,O,1,0,"span",12),e.EFF(17," Transfer "),e.k0s(),e.j41(18,"a",13),e.EFF(19,"Cancel"),e.k0s()()()()()),2&n&&(e.R7$(4),e.Y8G("ngIf",i.employee),e.R7$(),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("ngClass",e.eq3(7,X,i.submitted&&i.f.departmentId.errors)),e.R7$(3),e.Y8G("ngForOf",i.departments),e.R7$(),e.Y8G("ngIf",i.submitted&&i.f.departmentId.errors),e.R7$(2),e.Y8G("disabled",i.loading),e.R7$(),e.Y8G("ngIf",i.loading))},dependencies:[p.YU,p.Sq,p.bT,s.qT,s.xH,s.y7,s.wz,s.BC,s.cb,s.j4,s.JD,d.Wk],encapsulation:2})}}return r})()}];let M=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(B),d.iI]})}}return r})(),J=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[p.MD,s.X1,d.iI,M]})}}return r})()}}]);